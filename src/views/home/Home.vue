<template lang="">
  <div class="home-wrapper relative">
    <HeaderSearch />
    <Banners/>
    <van-tabs v-model="active" sticky offset-top="54px">
      <van-tab title="发现音乐">
        <div class="recommended-wrapper">
          <div class="recommended-header flex mt-2">
            <div class="flex-1 ml-6 text-lg">推荐歌单</div>
            <span class="recommended-showmore text-xs mr-6 border-2 px-2 py-1 rounded-xl">更多</span>
          </div>
          <div class="grid grid-cols-3">
            <RecommendedItem
              :picUrl="song.picUrl"
              :id="song.id"
              :playCount="song.playCount"
              :name="song.name"
              class="justify-self-center mt-4"
              v-for="(song, index) in recommendedList"
              :key="index"
            ></RecommendedItem>
          </div>
        </div>
      </van-tab>
      <van-tab title="推荐歌单">内容 2</van-tab>
      <van-tab title="上新">内容 3</van-tab>
    </van-tabs>
  </div>
</template>
<script>
import { NavBar } from 'vant'
import HeaderSearch from './components/HeaderSearch.vue'
import RecommendedItem from './components/RecommendedItem.vue'
import Banners from './components/Banners.vue'
import { request } from '@/utils/request.js'
import { getRecommends } from '@/utils/api.js'
export default {
  name: 'Home',
  components: {
    [NavBar.name]: NavBar,
    HeaderSearch,
    RecommendedItem,
    Banners
  },
  data() {
    return {
      active: 0,
      recommendedList: [],
      banners: [{ playCount: 100, id: 1, name: 'xx', pic: 'https://p2.music.126.net/a4RUDBj-LDKN7WMClV65OQ==/109951164735432462.jpg' }]
    }
  },
  methods: {
    add() {
      this.$store.commit('add')
    }
  },
  mounted() {
    request({
      url: getRecommends
    }).then(res => {
      console.log('res', res.result)
      this.recommendedList = res.result
    })
  }
}
</script>
<style lang="less">
.bottomPlayer {
  margin-bottom: 50px;
}
</style>
